<!DOCTYPE html>
<html lang="en">
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title style="text-align: left;">DIPLOM - –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    </style>
</head>
<body>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body { font-family: Arial, sans-serif; background-color: #fafafa; color: #333; margin: 0; padding: 0; } .container { max-width: 1200px; margin: auto; padding: 2rem; } h2 { font-size: 2.5rem; margin-bottom: 1rem; } p { line-height: 1.6; } a.btn { display: inline-block; text-decoration: none; border-radius: 5px; padding: 0.75rem 1.5rem; transition: all 0.3s ease-in-out; } a.btn-secondary { background-color: #6c757d; color: white; } a.btn-secondary:hover { background-color: #5a6268; } button.btn { cursor: pointer; border-radius: 5px; padding: 0.75rem 1.5rem; font-weight: bold; transition: all 0.3s ease-in-out; } button.btn-primary { background-color: #007bff; color: white; } button.btn-primary:hover { background-color: #0056b3; } img.product-image { width: 40%; height: 40%; object-fit: cover; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); margin-top: 1rem; } .product-container { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; } .product-header { width: 50%; } .product-price { font-size: 1.5rem; font-weight: bold; color: #dc3545; } .reviews-section { margin-top: 2rem; } ul.list-group { list-style-type: none; padding-left: 0; } li.list-group-item { background-color: #fff; border: 1px solid #dee2e6; border-radius: 5px; padding: 1rem; margin-bottom: 1rem; } .review-buttons form button { font-size: 1rem; padding: 0.5rem 1rem; border-radius: 5px; transition: all 0.3s ease-in-out; } .review-buttons form button.active-like { background-color: #28a745; color: white; } .review-buttons form button.active-dislike { background-color: #dc3545; color: white; }
    </style>
    <title>–¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –º–µ–Ω—é</title>
</head>
<header class="header">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">

        <a class="navbar-brand" href="#">DIPLOM</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mx-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/">–ì–ª–∞–≤–Ω–∞—è</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/katalog">–ö–∞—Ç–∞–ª–æ–≥</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/cart">–ö–æ—Ä–∑–∏–Ω–∞</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
                </li>
            </ul>
            <ul class="navbar-nav">
                <li class="nav-item">
                    <link rel="stylesheet" href="static/style.css">
                    {% if 'username' in session %}
                    <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ session['username'] }}!</p>
                    <button class="btn btn-primary" onclick="location.href = '{{ url_for('logout') }}'">–í—ã–π—Ç–∏</button>
                    {% else %}
                    <button class="btn btn-primary" onclick="location.href = '{{ url_for('login') }}'">–í—Ö–æ–¥</button>
                    {% endif %}
                </li>
            </ul>
        </div>
    </nav>
</header>
<style>
  .container {
  max-width: 1400px;
  margin: 30px auto;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: #333;
}

/* –û—Å–Ω–æ–≤–Ω–æ–π –±–ª–æ–∫ —Ç–æ–≤–∞—Ä–∞ */
.product-container {
  background: #fff;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgb(0 0 0 / 0.1);
  padding: 20px;
  /* –î–æ–±–∞–≤–∏–º –Ω–∏–∂–Ω–∏–π –æ—Ç—Å—Ç—É–ø, —á—Ç–æ–±—ã –æ—Ç–¥–µ–ª–∏—Ç—å –æ—Ç —Å–ª–µ–¥—É—é—â–µ–≥–æ –±–ª–æ–∫–∞ */
  margin-bottom: 40px;
}

/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Ü–µ–Ω–∞ */
.product-header {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.product-header h2 {
  font-weight: 700;
  font-size: 2rem;
  margin: 0;
  flex: 1 1 auto;
}

.product-price {
  font-size: 1.5rem;
  font-weight: 600;
  color: #2a9d8f;
  margin-left: 20px;
  white-space: nowrap;
}

/* –û—Ç—Å—Ç—É–ø –ø–æ–¥ —Å—Ä–µ–¥–Ω–µ–π –æ—Ü–µ–Ω–∫–æ–π */
.product-container > p {
  margin-top: 0;
  margin-bottom: 20px; /* –¥–æ–±–∞–≤–ª–µ–Ω –æ—Ç—Å—Ç—É–ø */
}

/* –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ */
.product-image {
  width: 100%;
  max-height: 400px;
  object-fit: contain;
  border-radius: 6px;
  margin-bottom: 25px; /* —É–≤–µ–ª–∏—á–µ–Ω –æ—Ç—Å—Ç—É–ø */
}

/* –û–ø–∏—Å–∞–Ω–∏–µ */
.product-description {
  font-size: 1.1rem;
  line-height: 1.6;
  color: #555;
  margin-bottom: 30px;
}

/* –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É" */
form button.btn-primary {
  background-color: #2a9d8f;
  border: none;
  padding: 10px 20px;
  font-weight: 600;
  transition: background-color 0.3s ease;
  /* –û—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É, —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ –Ω–µ –ø—Ä–∏–ª–∏–ø–∞–ª–∞ –∫ –æ–ø–∏—Å–∞–Ω–∏—é */
  margin-top: 10px;
}

form button.btn-primary:hover {
  background-color: #21867a;
}

/* –ë–ª–æ–∫ –æ—Ç–∑—ã–≤–æ–≤ */
.reviews-section {
  background: #f9f9f9;
  border-radius: 8px;
  padding: 25px 20px;
  box-shadow: 0 2px 8px rgb(0 0 0 / 0.05);
}

/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ—Ç–∑—ã–≤–æ–≤ */
.reviews-section h3 {
  font-weight: 700;
  margin-bottom: 15px; /* —É–≤–µ–ª–∏—á–µ–Ω –æ—Ç—Å—Ç—É–ø */
  color: #264653;
}

/* –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å –ø–æ—è—Å–Ω–µ–Ω–∏–µ–º */
.reviews-section p em {
  color: #888;
  font-size: 0.9rem;
  margin-bottom: 20px;
  display: block; /* —á—Ç–æ–±—ã –æ—Ç—Å—Ç—É–ø —Ä–∞–±–æ—Ç–∞–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ */
}

/* –û—Ç–¥–µ–ª—å–Ω—ã–π –æ—Ç–∑—ã–≤ */
.list-group-item {
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 6px;
  margin-bottom: 15px; /* —É–≤–µ–ª–∏—á–µ–Ω –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –æ—Ç–∑—ã–≤–∞–º–∏ */
  padding: 15px 20px;
}

/* –ö–Ω–æ–ø–∫–∏ –ª–∞–π–∫/–¥–∏–∑–ª–∞–π–∫ */
.review-buttons {
  margin-top: 12px; /* –Ω–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å—Ç—É–ø —Å–≤–µ—Ä—Ö—É */
  gap: 10px; /* —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ */
  display: flex;
}

/* –ê–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ */
.btn-outline-success.active-like {
  background-color: #2a9d8f;
  color: #fff;
  border-color: #2a9d8f;
}

.btn-outline-danger.active-dislike {
  background-color: #e76f51;
  color: #fff;
  border-color: #e76f51;
}

.btn-sm {
  min-width: 60px;
}

</style>

<div class="container">

  <div class="product-container">
    <div class="product-header">
      <h2>{{ —Ç–æ–≤–∞—Ä.–ù–∞–∑–≤–∞–Ω–∏–µ }}</h2>
      <div class="product-price">{{ —Ç–æ–≤–∞—Ä.–¶–µ–Ω–∞ }} —Ä—É–±.</div>
    </div>
    <p>–°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞: <strong>{{ avg_rating }} / 5</strong></p>
    <img src="{{ —Ç–æ–≤–∞—Ä.image_url }}" alt="{{ —Ç–æ–≤–∞—Ä.–ù–∞–∑–≤–∞–Ω–∏–µ }}" class="product-image">
    <p class="product-description">{{ —Ç–æ–≤–∞—Ä.–û–ø–∏—Å–∞–Ω–∏–µ }}</p>
    <form action="{{ url_for('add_to_cart', tovar_id=—Ç–æ–≤–∞—Ä.id) }}" method="POST">
      <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
    </form>
  </div>

  <div class="reviews-section mt-5">
    <h3>–û—Ç–∑—ã–≤—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π</h3>
    <p><em>–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏ —Ç–æ–≤–∞—Ä–∞.</em></p>

    {% if –æ—Ç–∑—ã–≤—ã %}
      <ul class="list-group">
        {% for –æ—Ç–∑—ã–≤ in –æ—Ç–∑—ã–≤—ã %}
          <li class="list-group-item" id="review-{{ –æ—Ç–∑—ã–≤.id }}">
            <p><strong>–û—Ü–µ–Ω–∫–∞:</strong> {{ –æ—Ç–∑—ã–≤.–û—Ü–µ–Ω–∫–∞ }} / 5</p>
            <p>{{ –æ—Ç–∑—ã–≤.–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ }}</p>
            <div class="review-buttons d-flex gap-2">
              {% set user_vote = None %}
              {% for vote in –æ—Ç–∑—ã–≤.votes %}
                {% if vote.id_klient == session.get('user_id') %}
                  {% set user_vote = vote.vote.name %}
                {% endif %}
              {% endfor %}
              <form action="{{ url_for('vote_review', review_id=–æ—Ç–∑—ã–≤.id, vote_type='like') }}" method="post" style="margin:0;">
                <button type="submit" class="btn btn-sm btn-outline-success {% if user_vote == 'like' %}active-like{% endif %}">üëç {{ –æ—Ç–∑—ã–≤.likes or 0 }}</button>
              </form>
              <form action="{{ url_for('vote_review', review_id=–æ—Ç–∑—ã–≤.id, vote_type='dislike') }}" method="post" style="margin:0;">
                <button type="submit" class="btn btn-sm btn-outline-danger {% if user_vote == 'dislike' %}active-dislike{% endif %}">üëé {{ –æ—Ç–∑—ã–≤.dislikes or 0 }}</button>
              </form>
            </div>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤ –¥–ª—è —ç—Ç–æ–≥–æ —Ç–æ–≤–∞—Ä–∞.</p>
    {% endif %}
  </div>

</div>


    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<footer class="footer bg-light text-muted">
        <div class="container text-center">
            &copy;RNDM CREW MELON MUSIC 2025 - DIPLOM. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
        </div>
    </footer>
</body>
</html>
